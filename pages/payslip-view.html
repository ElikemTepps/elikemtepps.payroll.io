<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghana Payroll System - View Payslip</title>
    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/style.css">
    <!-- jsPDF for PDF generation -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
</head>
<body>
    <div class="wrapper">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar">
            <div class="sidebar-header">
                <a href="../index.html" class="sidebar-logo">
                    <i class="bi bi-cash-coin"></i>
                    <span>Ghana Payroll</span>
                </a>
            </div>
            
            <div class="sidebar-menu">
                <a href="../index.html" class="sidebar-menu-item">
                    <i class="bi bi-speedometer2"></i>
                    <span>Dashboard</span>
                </a>
                
                <a href="employees.html" class="sidebar-menu-item">
                    <i class="bi bi-people"></i>
                    <span>Employees</span>
                </a>
                
                <a href="payroll.html" class="sidebar-menu-item">
                    <i class="bi bi-cash-stack"></i>
                    <span>Payroll</span>
                </a>
                
                <a href="payslips.html" class="sidebar-menu-item active">
                    <i class="bi bi-file-earmark-text"></i>
                    <span>Payslips</span>
                </a>
                
                <a href="reports.html" class="sidebar-menu-item">
                    <i class="bi bi-bar-chart"></i>
                    <span>Reports</span>
                </a>
                
                <div class="sidebar-divider"></div>
                
                <a href="tax-calculator.html" class="sidebar-menu-item">
                    <i class="bi bi-calculator"></i>
                    <span>Tax Calculator</span>
                </a>
                
                <a href="settings.html" class="sidebar-menu-item">
                    <i class="bi bi-gear"></i>
                    <span>Settings</span>
                </a>
            </div>
        </aside>
        
        <!-- Main Content -->
        <div class="content">
            <!-- Navbar -->
            <nav class="navbar">
                <div class="d-flex align-items-center">
                    <button type="button" class="sidebar-toggle me-3" id="sidebarToggle">
                        <i class="bi bi-list"></i>
                    </button>
                    <h4 class="mb-0 d-none d-md-block">View Payslip</h4>
                </div>
                
                <div class="navbar-user">
                    <div class="user-avatar">
                        <i class="bi bi-person"></i>
                    </div>
                    <div class="user-name d-none d-md-block">Admin</div>
                </div>
            </nav>
            
            <!-- Breadcrumb -->
            <div class="d-flex align-items-center mb-4">
                <a href="payslips.html" class="text-muted">
                    <i class="bi bi-arrow-left me-2"></i>Back to Payslips
                </a>
            </div>
            
            <!-- Payslip Controls -->
            <div class="d-flex justify-content-end gap-2 mb-4">
                <button id="downloadBtn" class="btn btn-success">
                    <i class="bi bi-download me-2"></i>Download PDF
                </button>
                <button id="printBtn" class="btn btn-outline-secondary" onclick="window.print()">
                    <i class="bi bi-printer me-2"></i>Print
                </button>
            </div>
            
            <!-- Payslip Document -->
            <div class="card mb-4">
                <div class="card-body">
                    <div id="payslipDocument" class="p-4">
                        <!-- Company Header -->
                        <div class="text-center mb-4">
                            <h3 class="text-primary">Ghana Payroll System</h3>
                            <p class="mb-1">123 Independence Avenue, Accra, Ghana</p>
                            <p class="mb-0">Tel: +233 30 123 4567 | Email: info@ghanapayroll.com</p>
                        </div>
                        
                        <hr class="my-4">
                        
                        <!-- Payslip Header -->
                        <div class="text-center mb-4">
                            <h4 class="payslip-title">PAYSLIP</h4>
                            <p><strong>For the Month of June 2024</strong></p>
                        </div>
                        
                        <!-- Employee Information -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <table class="table table-borderless payslip-info">
                                    <tbody>
                                        <tr>
                                            <td class="fw-bold">Employee Name:</td>
                                            <td>Samuel Owusu</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Employee ID:</td>
                                            <td>EMP001</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Department:</td>
                                            <td>IT</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Position:</td>
                                            <td>Software Developer</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-md-6">
                                <table class="table table-borderless payslip-info">
                                    <tbody>
                                        <tr>
                                            <td class="fw-bold">Payslip No:</td>
                                            <td>PS001</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Pay Period:</td>
                                            <td>01/06/2024 - 30/06/2024</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Payment Date:</td>
                                            <td>30/06/2024</td>
                                        </tr>
                                        <tr>
                                            <td class="fw-bold">Payment Method:</td>
                                            <td>Bank Transfer</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                        
                        <!-- Earnings and Deductions -->
                        <div class="row mb-4">
                            <div class="col-md-6">
                                <div class="card shadow-sm h-100">
                                    <div class="card-header fw-bold bg-primary-light">
                                        Earnings
                                    </div>
                                    <div class="card-body p-0">
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td>Basic Salary</td>
                                                    <td class="text-end">GH₵ 4,500.00</td>
                                                </tr>
                                                <tr>
                                                    <td>Housing Allowance</td>
                                                    <td class="text-end">GH₵ 450.00</td>
                                                </tr>
                                                <tr>
                                                    <td>Transport Allowance</td>
                                                    <td class="text-end">GH₵ 450.00</td>
                                                </tr>
                                                <tr class="table-light fw-bold">
                                                    <td>Total Earnings</td>
                                                    <td class="text-end">GH₵ 5,400.00</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <div class="card shadow-sm h-100">
                                    <div class="card-header fw-bold bg-danger-light">
                                        Deductions
                                    </div>
                                    <div class="card-body p-0">
                                        <table class="table mb-0">
                                            <tbody>
                                                <tr>
                                                    <td>Income Tax</td>
                                                    <td class="text-end">GH₵ 736.00</td>
                                                </tr>
                                                <tr>
                                                    <td>SSNIT (5.5%)</td>
                                                    <td class="text-end">GH₵ 247.50</td>
                                                </tr>
                                                <tr>
                                                    <td>Health Insurance (2.5%)</td>
                                                    <td class="text-end">GH₵ 112.50</td>
                                                </tr>
                                                <tr class="table-light fw-bold">
                                                    <td>Total Deductions</td>
                                                    <td class="text-end">GH₵ 1,096.00</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Net Pay -->
                        <div class="card shadow-sm mb-4">
                            <div class="card-body">
                                <div class="row align-items-center">
                                    <div class="col-md-8">
                                        <div class="row">
                                            <div class="col-6 fw-bold">Gross Pay:</div>
                                            <div class="col-6 text-end">GH₵ 5,400.00</div>
                                        </div>
                                        <div class="row">
                                            <div class="col-6 fw-bold">Total Deductions:</div>
                                            <div class="col-6 text-end">GH₵ 1,096.00</div>
                                        </div>
                                    </div>
                                    <div class="col-md-4 border-start">
                                        <div class="d-flex justify-content-between">
                                            <h5 class="fw-bold mb-0">Net Pay:</h5>
                                            <h5 class="fw-bold mb-0">GH₵ 4,304.00</h5>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Note -->
                        <div class="mb-4">
                            <p class="mb-0"><small>This is a computer-generated payslip and requires no signature.</small></p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Custom JavaScript -->
    <script src="../js/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // PDF Download functionality
            const downloadBtn = document.getElementById('downloadBtn');
            if (downloadBtn) {
                downloadBtn.addEventListener('click', function() {
                    const element = document.getElementById('payslipDocument');
                    const opt = {
                        margin: 10,
                        filename: 'Samuel_Owusu_Payslip_June_2024.pdf',
                        image: { type: 'jpeg', quality: 0.98 },
                        html2canvas: { scale: 2 },
                        jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
                    };

                    // Use html2canvas and jsPDF
                    html2canvas(element).then(canvas => {
                        const imgData = canvas.toDataURL('image/jpeg', 1.0);
                        const pdf = new jspdf.jsPDF('p', 'mm', 'a4');
                        const imgProps = pdf.getImageProperties(imgData);
                        const pdfWidth = pdf.internal.pageSize.getWidth();
                        const pdfHeight = (imgProps.height * pdfWidth) / imgProps.width;
                        pdf.addImage(imgData, 'JPEG', 0, 0, pdfWidth, pdfHeight);
                        pdf.save(opt.filename);
                    });
                });
            }
        });
    </script>
</body>
</html>